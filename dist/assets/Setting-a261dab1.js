import{i as D,aj as W,v as N,r as s,l as T,n as q,p as z,k as J,z as O,j as t,x,y as G,B as v,w as H}from"./index-98cf31d0.js";import{A as L,a as K}from"./AccordionDetails-b2f633b0.js";import{T as a,F as Q}from"./TextField-4e8958de.js";import{M as l}from"./MenuItem-21f050f2.js";import{S as U,a as V}from"./Stack-ad058a13.js";const se=()=>{const d=D();W(),N();const o=s.createRef(),j=T(),[y,u]=s.useState([]),[b,m]=s.useState([]),[S,p]=s.useState([]),[C,h]=s.useState([]),[R,g]=s.useState([]),[n,{defaultProps:c,handleChange:X,bindEvents:k,validate:Y,set:A}]=q(s.useState,{status:"1"}),[I]=s.useState(!0);s.useEffect(()=>{d({type:"title",title:"Configuración"}),[["red",h],["microred",g],["region",u],["province",m],["district",p]].forEach(async i=>{i[1](await z[i[0]].toArray())});try{var e=localStorage.getItem("setting");if(e){e=JSON.parse(e);var r={};r.red=e.red,r.microred=e.microred,r.region=e.region,r.province=e.province,r.district=e.district,r.establishment=e.establishment,r.town=e.town,A(r)}}catch(i){console.log(i)}},[]),J(({width:e,height:r})=>{if(o.current){const[i,f]=o.current.children,B=document.querySelector("nav");i.style.height=r-f.offsetHeight+"px",f.style.width=e-B.offsetWidth+"px"}},o);const w=()=>{[["red",h],["microred",g],["region",u],["province",m],["district",p]].forEach(async e=>{H(e[0],e[1],!0)})},E=()=>{j("/user/create",{replace:!0})},F=()=>{localStorage.setItem("setting",JSON.stringify(n)),d({type:"snack",msg:"Registro grabado!"})};s.useEffect(()=>{const e=o.current;if(e!=null)return k(e)},[n,I]);const _=e=>console.log(e);O({components:{MuiInput:{defaultProps:{required:!0}}}});function M(){return t.jsxs(t.Fragment,{children:[t.jsx(v,{onClick:w,color:"primary",children:"Recuperar"}),t.jsx(v,{onClick:F,color:"primary",endIcon:t.jsx(V,{}),children:"Grabar"})]})}function P(){return t.jsxs("form",{ref:o,onSubmit:_,style:{textAlign:"left"},children:[t.jsx(x,{style:{overflow:"auto"},children:t.jsx(L,{expanded:!0,children:t.jsxs(K,{children:[t.jsx(a,{select:!0,label:"Región",...c("region"),children:y.map((e,r)=>t.jsx(l,{value:e.code,children:e.name},"region_"+r))}),t.jsx(a,{select:!0,label:"Provincia",...c("province"),children:b.filter(e=>e.code.startsWith(n.region)).map((e,r)=>t.jsx(l,{value:e.code,children:e.name},"province_"+r))}),t.jsx(a,{select:!0,label:"Distrito",...c("district"),children:S.filter(e=>e.code.startsWith(n.province)).map((e,r)=>t.jsx(l,{value:e.code,children:e.name},"district_"+r))}),t.jsx(a,{select:!0,label:"Red",...c("red"),children:C.map((e,r)=>t.jsx(l,{value:e.code,children:e.name},"red_"+r))}),t.jsx(a,{select:!0,label:"Microred",...c("microred"),children:R.filter(e=>e.code.startsWith(n.red)).map((e,r)=>t.jsx(l,{value:e.code,children:e.name},"microred_"+r))})]})})}),t.jsx(U,{direction:"row",justifyContent:"center",style:{padding:"10px",backgroundColor:"#1976d2"},alignItems:"center",spacing:1,children:M()}),n._id&&t.jsx(Q,{color:"primary","aria-label":"add",onClick:E,style:{position:"absolute",bottom:80,right:24},children:t.jsx(G,{})})]})}return t.jsx(t.Fragment,{children:t.jsx(x,{style:{textAlign:"left"},children:P()})})};export{se as Form};
